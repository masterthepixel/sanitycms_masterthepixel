# MIG-005 — Migrate remaining pages & singletons to file content

Branch: feature/migration/sanity-to-md/mig-005
Priority: Medium
Estimate: 12–24 hours
Assignee: @frontend-dev (suggested) — page-builder & layout owner

## Goal
Convert Projects, Services, Legal pages, and site singletons (navigation, settings) to file-based content (MDX or JSON as appropriate).

## Acceptance criteria
- `src/app/(frontend)/layout.tsx` reads site settings from `content/site.json` or `src/config/site.ts`
- All major public pages served from file content

## Developer tasks (developer-ready, assignable)
1. Singletons & config (1–2h)
   - Create `content/site.json` with navigation, footer, and settings fields copied from `src/sanity/lib/queries/*` outputs.
   - Update `src/app/(frontend)/layout.tsx` to read from `content/site.json` using `src/lib/content.ts`.
2. Convert remaining Page Builder pages (4–8h)
   - Use `scripts/sanity-to-mdx.js` to convert remaining pages; for pages with unmapped blocks, keep JSON fallback in `content/pages/<slug>.json` and add TODO markers.
3. Page Builder frontend support (2–3h)
   - Ensure `src/components/page-builder/index.tsx` can accept either `pageBuilder` prop (from Sanity) or `pageBuilder` loaded from local JSON; add a small adapter: `normalizePageBuilder(data)`.
4. Types & type cleanup (1–2h)
   - Add `src/types/content.ts` and refactor code that imported `sanity.types.ts` to use new types.
   - Add migration-type tests to ensure type compatibility.

Dev acceptance checklist
- [ ] Layout reads site config from file
- [ ] Remaining pages converted or kept as JSON fallback with TODOs
- [ ] Types updated and compiled (npx tsc --noEmit)
- [ ] PR merged into epic branch


## Done checklist
- [ ] Site singletons migrated
- [ ] All public pages render from file content
- [ ] PR merged into epic branch

# MIG-001 — Add file-content foundation (MDX reader + sample content)

Branch: feature/migration/sanity-to-md/mig-001
Priority: High
Estimate: 8–12 hours
Assignee: @mastethepixel (suggested) — frontend owner / initial implementer

## Goal
Add MDX support and a small content-reading library so the app can load posts/pages from `content/` files instead of Sanity. Create an epic branch and a sample MDX page to validate the change.

## Acceptance criteria
- `content/posts/sample.mdx` and `content/pages/sample.mdx` exist and render correctly
- `src/lib/content.ts` exposes `getAllPosts()`, `getPostBySlug()`, `getPageBySlug()` and has unit tests
- `pnpm run dev` and `pnpm run build` succeed

## Developer tasks (developer-ready, assignable)
1. Project setup (0.5h)
   - Add deps: `gray-matter`, `@mdx-js/react` (or `next-mdx-remote`) and run `pnpm install`.
   - Files: update `package.json` and `pnpm-lock.yaml`.
2. Content reader (2–3h)
   - Implement `src/lib/content.ts` (server-only helpers):
     - export async function `getAllPosts(): Promise<Post[]>`
     - export async function `getPostBySlug(slug: string)`
     - export async function `getPageBySlug(slug: string)`
     - Read files from `content/posts/*.mdx` and parse frontmatter with `gray-matter`.
   - Write types in `src/types/content.ts` (PostFrontmatter, PageFrontmatter).
3. MDX renderer & components (2h)
   - Add `src/components/MDXRenderer.tsx` that uses `@mdx-js/react` and exposes common shortcodes: `Image`, `Callout`, `YouTube`.
   - Map existing `src/components/page-builder/blocks/*` components to simple MDX wrappers in `src/components/mdx/`.
4. Sample content & wiring (1h)
   - Create `content/posts/sample.mdx` and `content/pages/sample.mdx` with frontmatter fields (title, slug, date, excerpt, seo).
   - Add a minimal route test page usage example in `src/app/(frontend)/blog/page.tsx` (temporary dev-only import) or a dev-only preview route.
5. Tests (1–2h)
   - Unit tests for `src/lib/content.ts` (`tests/unit/content.spec.ts`) asserting parsing of frontmatter and MDX body.
   - Add snapshot test for `MDXRenderer` rendering of `sample.mdx`.
6. Branch & PR (0.5h)
   - Create branch: `git checkout -b feature/migration/sanity-to-md/mig-001`
   - Open draft PR into `feature/migration/sanity-to-md` with PR body linking this story file and the epic.

Dev acceptance checklist
- [ ] `getAllPosts()` returns expected shape (unit test)
- [ ] `sample.mdx` renders via `MDXRenderer` (snapshot)
- [ ] `pnpm run build` completes successfully
- [ ] Draft PR created and CI passes

## Done checklist
- [ ] Dependencies added and installed
- [ ] `src/lib/content.ts` implemented and tested
- [ ] Sample MDX pages committed
- [ ] Draft PR opened into epic branch
